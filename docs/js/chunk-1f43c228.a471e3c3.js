(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f43c228"],{"0e20":function(e,t,n){"use strict";n.r(t);var o,a,r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rootContainer"},[n("left-side",{on:{add:e.addComponent}}),n("main-content",{ref:"mainCotent",attrs:{drawingList:e.drawingList,formProps:e.formProps},on:{changeFormProps:e.changeFormProps,setActiveComponent:e.setActiveComponent}}),n("right-side",{attrs:{formProps:e.formProps,activeComponent:e.activeComponent,tableColumnProps:e.tableColumnProps}})],1)},i=[],s=n("03a9"),_=n("1128"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mainContentContainer"},[n("div",{staticClass:"topArea"},[n("div",{staticClass:"leftArea"},[n("el-button",{attrs:{type:"text",icon:"el-icon-notebook-2"},on:{click:function(t){return e.$router.push("/")}}},[e._v("前往表单设计器")])],1),n("div",{staticClass:"rightArea"},[n("el-dropdown",{on:{command:e.sortDeleteCommand}},[n("el-button",{staticClass:"commonBtn",attrs:{type:"text",icon:"el-icon-s-operation"}},[e._v("排序&删除")]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"formItem"}},[e._v("表单")]),n("el-dropdown-item",{attrs:{command:"tableColumn"}},[e._v("表格")])],1)],1),n("el-dropdown",{on:{command:e.upDownCommand}},[n("el-button",{staticClass:"commonBtn",attrs:{type:"text",icon:"el-icon-sort"}},[e._v("上传/下载Vue文件")]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"uplaod"}},[e._v("上传Vue文件")]),n("el-dropdown-item",{attrs:{command:"download"}},[e._v("下载Vue文件")])],1)],1),n("el-dropdown",{on:{command:e.copyCommand}},[n("el-button",{staticClass:"commonBtn",attrs:{type:"text",icon:"el-icon-document-copy"}},[e._v("复制")]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[e._v("复制完整代码")]),n("el-dropdown-item",{attrs:{command:"form"}},[e._v("复制表单Json代码")]),n("el-dropdown-item",{attrs:{command:"table"}},[e._v("复制表格Json代码")])],1)],1),n("el-dropdown",{on:{command:e.clearCommand}},[n("el-button",{staticClass:"commonBtn dangerText",attrs:{type:"text",icon:"el-icon-delete"}},[e._v("清空")]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"all"}},[e._v("清空所有")]),n("el-dropdown-item",{attrs:{command:"normal"}},[e._v("清空普通搜索")]),n("el-dropdown-item",{attrs:{command:"advance"}},[e._v("清空高级搜索")]),n("el-dropdown-item",{attrs:{command:"table"}},[e._v("清空表格")])],1)],1)],1)]),n("el-scrollbar",{staticClass:"scrollBar",attrs:{vertical:!0}},[n("el-card",{staticClass:"drawingBoard",attrs:{shadow:"never",header:"搜索条件"}},[n("el-query-filter",e._b({attrs:{"normal-schema":e.normalSchema,"normal-ui-schema":e.normalUiSchema,"advance-schema":e.advanceSchema,"advance-ui-schema":e.advanceUiSchema},model:{value:e.formModel,callback:function(t){e.formModel=t},expression:"formModel"}},"el-query-filter",e.formProps,!1))],1),n("table-card",{ref:"tableCard",attrs:{tableList:e.tableList},on:{setActiveComponent:e.setActiveComponent}})],1),n("input",{attrs:{id:"copyNode",type:"hidden"}}),n("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:".vue",id:"uploader"},on:{change:e.changeFile}}),n("sort-delete-form-item-dialog",{attrs:{visible:e.formItemVisible,normalList:e.normalList,advanceList:e.advanceList},on:{"update:visible":function(t){e.formItemVisible=t},delete:e.setDefaultComponent,draggerEnd:e.setDefaultComponent}}),n("sort-delete-table-column-dialog",{attrs:{visible:e.tableColumnVisible,list:e.tableList},on:{"update:visible":function(t){e.tableColumnVisible=t},delete:e.setDefaultComponentByTableColumn}})],1)},l=[],m=(n("96cf"),n("1da1")),d=(n("7514"),n("28a5"),n("456d"),n("ac6a"),n("5df3"),n("1c4c"),n("6762"),n("2fdb"),n("b311")),u=n.n(d),p=n("21a6"),f={components:{},props:{tableList:{type:Array,default:function(){return[]}},formProps:{type:Object,default:function(){}}},data:function(){return{schema:{},uiSchema:{},tableData:[]}},mounted:function(){var e=this;document.querySelector(".tableCardContainer").addEventListener("click",(function(t){e.bindFindComponent(t)}))},watch:{tableList:{deep:!0,handler:function(){this.initSchema()}}},methods:{clear:function(){this.setActiveComponent({})},bindFindComponent:function(e){var t=e.path.find((function(e){return"TH"===e.nodeName}));if(t){var n=t.querySelector(".vxe-cell--title").innerText,o=this.tableList.find((function(e){return e.title===n}));o&&this.setActiveComponent(o)}},setActiveComponent:function(e){var t=Array.from(document.querySelectorAll(".tableCardContainer th")),n=t.find((function(t){return t.innerText===e.title})),o=document.querySelector(".tableCardContainer th.selected");o&&o.classList.remove("selected"),n?n.classList.add("selected"):t.length&&t[t.length-1].classList.add("selected"),this.$emit("setActiveComponent",e,"tableColumn")},initSchema:function(){var e={},t={};this.tableList.forEach((function(n){var o=n.key,a=n.title,r=n.type;e[o]={title:a,type:r},t[o]={"ui:options":{}};var i=Object.keys(n).filter((function(e){return e.includes("ui:options.")}));i.forEach((function(e){t[o]["ui:options"][e.split("ui:options.")[1]]=n[e]||""}))})),this.schema={properties:e},this.uiSchema=t},getTableSchemaInfo:function(){return{tableSchema:this.schema,tableUiSchema:this.uiSchema}},renderProTable:function(){var e=this.$createElement,t=this.schema,n=this.uiSchema,o=this.tableData;return e("el-pro-table",{attrs:{schema:t,uiSchema:n,data:o,isShowColumnSetting:!1}})}},render:function(){var e=arguments[0];return e("div",{class:"tableCardContainer"},[this.renderProTable()])}},h=f,b=(n("3299"),n("2877")),v=Object(b["a"])(h,o,a,!1,null,"556e86a9",null),g=v.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"sortDeleteFormItemDialog",attrs:{width:"60%",title:"排序&删除",visible:e.innerVisible},on:{"update:visible":function(t){e.innerVisible=t}}},[n("div",{staticClass:"formArea"},[n("div",{staticClass:"formItem"},[n("p",[e._v("普通搜索")]),n("draggable",{staticClass:"formDraggable",attrs:{list:e.normalList,animation:340,group:"componentsGroup"},on:{end:e.onEnd}},e._l(e.normalList,(function(t,o){return n("div",{key:o,staticClass:"item"},[n("span",[e._v(e._s(t.schema.title)+" —— "+e._s(t.key))]),n("i",{staticClass:"el-icon-delete deleteItem",on:{click:function(t){return e.deleteItem(e.normalList,o)}}})])})),0)],1),n("div",{staticClass:"formItem"},[n("p",[e._v("高级搜索")]),n("draggable",{staticClass:"formDraggable",attrs:{list:e.advanceList,animation:340,group:"componentsGroup"}},e._l(e.advanceList,(function(t,o){return n("div",{key:o,staticClass:"item"},[n("span",[e._v(e._s(t.schema.title)+" —— "+e._s(t.key))]),n("i",{staticClass:"el-icon-delete deleteItem",on:{click:function(t){return e.deleteItem(e.advanceList,o)}}})])})),0)],1)]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button-group",{staticClass:"dialog-bt-group"},[n("el-button",{attrs:{type:"info"},on:{click:function(t){e.innerVisible=!1}}},[e._v("关闭")])],1)],1)])},E=[],O=n("b76a"),y=n.n(O),P={components:{draggable:y.a},props:{visible:{type:Boolean,default:!1},normalList:{type:Array,default:function(){return[]}},advanceList:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:{innerVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},mounted:function(){},methods:{deleteItem:function(e,t){e.splice(t,1),this.$emit("delete")},onEnd:function(){this.$emit("draggerEnd")}}},D=P,L=(n("2219"),Object(b["a"])(D,C,E,!1,null,"11e02394",null)),M=L.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"sortDeleteTableColumnDialog",attrs:{width:"60%",title:"排序&删除",visible:e.innerVisible},on:{"update:visible":function(t){e.innerVisible=t}}},[n("draggable",{staticClass:"formDraggable",attrs:{list:e.list,animation:340,group:"componentsGroup"}},e._l(e.list,(function(t,o){return n("div",{key:o,staticClass:"item"},[n("span",[e._v(e._s(t.title)+" —— "+e._s(t.key))]),n("i",{staticClass:"el-icon-delete deleteItem",on:{click:function(t){return e.deleteItem(o)}}})])})),0),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button-group",{staticClass:"dialog-bt-group"},[n("el-button",{attrs:{type:"info"},on:{click:function(t){e.innerVisible=!1}}},[e._v("关闭")])],1)],1)],1)},w=[],A={components:{draggable:y.a},props:{visible:{type:Boolean,default:!1},list:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:{innerVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},mounted:function(){},methods:{deleteItem:function(e){this.list.splice(e,1),this.$emit("delete")}}},j=A,T=(n("4b65"),Object(b["a"])(j,S,w,!1,null,"5302488b",null)),k=T.exports,U=n("f61c"),I=n("e31c");function B(e,t){return Array.from(e.classList).includes(t)}var K={components:{TableCard:g,SortDeleteFormItemDialog:M,SortDeleteTableColumnDialog:k},inject:{generatorType:{default:"form"}},props:{formProps:{type:Object,default:function(){}}},data:function(){return{formModel:{},normalFormModel:{},normalSchema:{},normalUiSchema:{},advanceFormModel:{},advanceSchema:{},advanceUiSchema:{},tableColumnVisible:!1,formItemVisible:!1,copyType:"",normalList:[],advanceList:[],tableList:[]}},mounted:function(){var e=this;document.querySelector(".drawingBoard").addEventListener("click",(function(t){e.bindFindComponent(t)}));var t=new u.a("#copyNode",{text:function(){var t=e.generateCode(e.copyType);return e.$notify({title:"成功",message:"代码已复制到剪切板，可粘贴。",type:"success"}),t}});t.on("error",(function(){e.$message.error("代码复制失败")}))},watch:{normalList:{deep:!0,handler:function(){this.initNormalSchema()}},advanceList:{deep:!0,handler:function(){this.initAdvanceSchema()}}},computed:{},methods:{addComponent:function(e,t){var n=this,o=this.$loading({lock:!0,text:"渲染中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});"normal"===t||"advance"===t?("normal"===t?this.normalList.push(e):"advance"===t&&this.advanceList.push(e),this.setActiveComponent(e),setTimeout((function(){n.setActiveComponentClass(e),o.close()}),200)):(this.tableList.push(e),setTimeout((function(){n.$refs.tableCard.setActiveComponent(e),o.close()}),200))},initNormalSchema:function(){var e=this,t=[],n={},o={},a={};this.normalList.forEach((function(r){var i=r.key;r.required&&t.push(i),n[i]=e.normalSchema[i]||r.schema,o[i]=e.normalUiSchema[i]||r.uiSchema,e.processUiSchemaKey(o[i]["ui:options"]),"array"===n[i].type?a[i]=e.formModel[i]||[]:a[i]=e.formModel[i]||"",n[i].lcComponentName=r.lcComponentName})),this.normalFormModel=a,this.formModel=Object.assign({},this.normalFormModel,this.advanceFormModel),this.normalSchema={required:t,properties:n},this.normalUiSchema=o,this.$nextTick((function(){e.appendKeyInfo("normal")}))},initAdvanceSchema:function(){var e=this,t=[],n={},o={},a={};this.advanceList.forEach((function(r){var i=r.key;r.required&&t.push(i),n[i]=e.advanceSchema[i]||r.schema,o[i]=e.advanceUiSchema[i]||r.uiSchema,e.processUiSchemaKey(o[i]["ui:options"]),"array"===n[i].type?a[i]=e.formModel[i]||[]:a[i]=e.formModel[i]||"",n[i].lcComponentName=r.lcComponentName})),this.advanceFormModel=a,this.formModel=Object.assign({},this.normalFormModel,this.advanceFormModel),this.advanceSchema={required:t,properties:n},this.advanceUiSchema=o,this.$nextTick((function(){e.appendKeyInfo("advance")}))},processUiSchemaKey:function(e){Object.keys(e).forEach((function(t){if(t.includes("uiSchema.ui:options.")){var n=t.split(".").pop();e[n]=e[t]}}))},appendKeyInfo:function(e){var t=null,n="";"normal"===e?(t=this.normalList,n="el-query-filter__normal"):(t=this.advanceList,n="el-query-filter__advance"),t.length&&Array.from(document.querySelectorAll(".".concat(n," .el-form-item"))).forEach((function(e,n){var o=e.querySelector("label");o&&o.setAttribute("data-key",t[n].key)}))},bindFindComponent:function(e){var t="",n=e.path.find((function(e){return!!e.className&&e.className.includes("el-form-item__label")}));if(n?t=n.getAttribute("data-key"):(B(e.target,"el-col")||B(e.target,"el-form-item"))&&(t=e.target.querySelector("label").getAttribute("data-key")),t){var o=this.normalList.concat(this.advanceList).find((function(e){return e.key===t}));o&&(this.setActiveComponent(o),this.setActiveComponentClass(o))}},setActiveComponentClass:function(e){var t=Array.from(document.querySelectorAll(".drawingBoard .el-form-item")),n=t.find((function(t){return t.querySelector('label[data-key="'.concat(e.key,'"]'))})),o=document.querySelector(".drawingBoard .el-form-item.selected");o&&o.classList.remove("selected"),n?n.classList.add("selected"):t.length&&t[t.length-1].classList.add("selected")},setActiveComponent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"formItem";this.$emit("setActiveComponent",e,t)},setDefaultComponent:function(){this.normalList.length?(this.setActiveComponent(this.normalList[0]),this.setActiveComponentClass(this.normalList[0])):this.advanceList.length&&(this.setActiveComponent(this.advanceList[0]),this.setActiveComponentClass(this.advanceList[0]))},setDefaultComponentByTableColumn:function(){var e=this;this.tableList.length&&this.$nextTick((function(){e.$refs.tableCard.setActiveComponent(e.tableList[0])}))},clearCommand:function(e){var t=this,n="";"all"===e?n="确定要清空所有组件吗？":"normal"===e?n="确定要清空普通搜索吗？":"advance"===e?n="确定要清空高级搜索吗？":"table"===e&&(n="确定要清空表格吗？"),this.$confirm(n,"提示",{type:"warning"}).then((function(){"all"===e?(Object(I["b"])(100),t.normalList=[],t.advanceList=[],t.tableList=[],t.$refs.tableCard.clear(),t.setActiveComponent({})):"normal"===e?(t.normalList=[],t.setActiveComponent({})):"advance"===e?(t.advanceList=[],t.setActiveComponent({})):"table"===e&&(t.tableList=[],t.$refs.tableCard.clear())}))},sortDeleteCommand:function(e){"formItem"===e?this.formItemVisible=!0:this.tableColumnVisible=!0},generateCode:function(e){var t=this.$refs.tableCard.getTableSchemaInfo(),n=t.tableSchema,o=t.tableUiSchema;return"form"===e?Object(U["b"])(this.normalSchema,this.normalUiSchema,this.advanceSchema,this.advanceUiSchema,this.formModel):"table"===e?Object(U["c"])(n,o):Object(U["a"])(this.formProps,this.normalSchema,this.normalUiSchema,this.advanceSchema,this.advanceUiSchema,n,o,this.formModel)},copyCommand:function(e){this.copyType=e,document.getElementById("copyNode").click()},upDownCommand:function(e){"download"===e?this.downloadCode():document.getElementById("uploader").click()},downloadCode:function(){var e=this.generateCode(),t=new Blob([e],{type:"text/plain;charset=utf-8"});Object(p["saveAs"])(t,"LowCodeForm.vue")},changeFile:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var n,o,a,r,i,s,_=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.$loading({lock:!0,text:"渲染中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e.next=3,Object(U["d"])(t.target);case 3:o=e.sent,a=o.normalList,r=o.advanceList,i=o.tableList,s=o.formProps,this.normalList=a,this.advanceList=r,this.tableList=i,this.$emit("changeFormProps",s),document.getElementById("uploader").value="",setTimeout((function(){_.setDefaultComponent(),_.setDefaultComponentByTableColumn(),n.close()}),200);case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},R=K,W=(n("daca"),Object(b["a"])(R,c,l,!1,null,"3a3343e1",null)),q=W.exports,x=n("5dfc"),F={components:{LeftSide:s["a"],RightSide:_["a"],MainContent:q},provide:{generatorType:"table"},data:function(){return{drawingList:[],activeComponent:{},tableColumnProps:{},formProps:x["g"]}},mounted:function(){},methods:{addComponent:function(e,t){this.$refs.mainCotent.addComponent(e,t)},setActiveComponent:function(e,t){"formItem"===t?this.activeComponent=e:"tableColumn"===t&&(this.tableColumnProps=e)},changeFormProps:function(e){this.formProps=e}}},V=F,$=(n("1af0"),Object(b["a"])(V,r,i,!1,null,"355de46e",null));t["default"]=$.exports},"1af0":function(e,t,n){"use strict";n("2562")},"200f":function(e,t,n){},2219:function(e,t,n){"use strict";n("200f")},2562:function(e,t,n){},3299:function(e,t,n){"use strict";n("6ad9")},"3a05":function(e,t,n){},"4b65":function(e,t,n){"use strict";n("3a05")},"69b5":function(e,t,n){},"6ad9":function(e,t,n){},"8e6e":function(e,t,n){var o=n("5ca1"),a=n("990b"),r=n("6821"),i=n("11e9"),s=n("f1ae");o(o.S,"Object",{getOwnPropertyDescriptors:function(e){var t,n,o=r(e),_=i.f,c=a(o),l={},m=0;while(c.length>m)n=_(o,t=c[m++]),void 0!==n&&s(l,t,n);return l}})},"990b":function(e,t,n){var o=n("9093"),a=n("2621"),r=n("cb7c"),i=n("7726").Reflect;e.exports=i&&i.ownKeys||function(e){var t=o.f(r(e)),n=a.f;return n?t.concat(n(e)):t}},ade3:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return o}))},daca:function(e,t,n){"use strict";n("69b5")},f61c:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getFormJson})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getTableJson})),__webpack_require__.d(__webpack_exports__,"a",(function(){return generatVueCode})),__webpack_require__.d(__webpack_exports__,"d",(function(){return importVueFile}));var core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("8e6e"),core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0__),C_git_setaria_low_code_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ade3"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("4917"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("6762"),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("2fdb"),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("456d"),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_10__),js_beautify__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("e552"),js_beautify__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(js_beautify__WEBPACK_IMPORTED_MODULE_11__),lodash_get__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("9b02"),lodash_get__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_12__),_components_formGenerator_components__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("5dfc");function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){Object(C_git_setaria_low_code_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function getStyle(){return'\n<style scoped lang="scss">\n</style>'}function getFormSchemaFromData(e,t,n){var o=[],a=_components_formGenerator_components__WEBPACK_IMPORTED_MODULE_13__["b"].concat(_components_formGenerator_components__WEBPACK_IMPORTED_MODULE_13__["e"]).reduce((function(e,t){var n=t.lcComponentName,o=t.schema,a=t.uiSchema;return e[n]={schema:o,uiSchema:a},e}),{});return Object.keys(e).forEach((function(r,i){var s=!1,_=e[r],c=_.lcComponentName;n.includes(r)&&(s=!0);var l=Object.assign({},a[c].uiSchema,t[r]),m=r;r.includes("field")&&(m=r+i),o.push({required:s,key:m,lcComponentName:c,schema:Object.assign({},a[c].schema,_),uiSchema:l})})),o}function getTableSchemaFromData(e,t){var n=[];return Object.keys(e).forEach((function(o,a){var r=e[o];Object.keys(t[o]["ui:options"]).forEach((function(e){r["ui:options.".concat(e)]=t[o]["ui:options"][e]}));var i=o;o.includes("field")&&(i=o+a),r.key=i,n.push(Object.assign({},_components_formGenerator_components__WEBPACK_IMPORTED_MODULE_13__["f"],r))})),n}function getScriptByVueFile(codeStr){var normalList=[],advanceList=[],tableList=[],p=/\<script\>.*?\<\/script\>/g;codeStr=codeStr.replace(/\n/g,"").replace(/ /g,"");var scriptStr=codeStr.match(p);if(scriptStr){var jsCodeStr=scriptStr[0].replace("<script>exportdefault","").replace("<\/script>",""),jsCode=eval("(".concat(jsCodeStr,")")),data=jsCode.data();normalList=getFormSchemaFromData(lodash_get__WEBPACK_IMPORTED_MODULE_12___default()(data,"normalSchema.properties",{}),lodash_get__WEBPACK_IMPORTED_MODULE_12___default()(data,"normalUiSchema",{}),lodash_get__WEBPACK_IMPORTED_MODULE_12___default()(data,"normalSchema.required",[])),advanceList=getFormSchemaFromData(lodash_get__WEBPACK_IMPORTED_MODULE_12___default()(data,"advanceSchema.properties",{}),lodash_get__WEBPACK_IMPORTED_MODULE_12___default()(data,"advanceUiSchema",{}),lodash_get__WEBPACK_IMPORTED_MODULE_12___default()(data,"advanceSchema.required",[])),tableList=getTableSchemaFromData(lodash_get__WEBPACK_IMPORTED_MODULE_12___default()(data,"tableSchema.properties",{}),lodash_get__WEBPACK_IMPORTED_MODULE_12___default()(data,"tableUiSchema",{}))}return{normalList:normalList,advanceList:advanceList,tableList:tableList}}function getDomProps(e){e=e.replace(/\n/g,"");var t=e.match(/\<el-query-filter .*?\/\>/g),n=t[0].replace("/>","").split(" :");n.shift();var o=Object.keys(_components_formGenerator_components__WEBPACK_IMPORTED_MODULE_13__["a"]);return n.forEach((function(e){e.trim(),console.log(e);var t=e.split("="),n=t[0],a=t[1].replace(/\"/g,"").replace(/\'/g,"").replace(/ /g,"");o.includes(n)&&(console.log(n,a),["true","false"].includes(a)?_components_formGenerator_components__WEBPACK_IMPORTED_MODULE_13__["a"][n]="true"===a:_components_formGenerator_components__WEBPACK_IMPORTED_MODULE_13__["a"][n]=a)})),_components_formGenerator_components__WEBPACK_IMPORTED_MODULE_13__["a"]}function formatUiSchema(e){var t=JSON.stringify(e,(function(e,t){return t instanceof RegExp||t instanceof Function?t.toString():t}));return t=t.replace(/\"pattern\"\:\".*?\"/g,(function(e){var t=e.split(':"')[1];return t=t.substring(0,t.length-1),t?(t=t.replace(/\\\\/g,"\\"),'"pattern":'.concat(t)):'"pattern":""'})),t=t.replace(/function .*?\(\)/g,"()=>").replace(/\\n/g,"").replace(/_this/g,"this").replace(/\"\(\)\=\>.*?\}\"/g,(function(e){return e.substring(1,e.length-1)})).replace(/\"function.*?\}\"/g,(function(e){var t=e.replace(/"function\(\)/g,"()=>");return t.substring(0,t.length-1)})).replace(/\\\"/g,'"'),t}var getFormJson=function(e,t,n,o,a){return js_beautify__WEBPACK_IMPORTED_MODULE_11___default.a.js("\n{\n    normalSchema:".concat(JSON.stringify(e),",\n    normalUiSchema:").concat(formatUiSchema(t),",\n    advanceSchema:").concat(JSON.stringify(n),",\n    advanceUiSchema:").concat(formatUiSchema(o),",\n    formModel:").concat(JSON.stringify(a),"\n}\n"))},getTableJson=function(e,t){return js_beautify__WEBPACK_IMPORTED_MODULE_11___default.a.js("\n{\n    tableSchema:".concat(JSON.stringify(e),",\n    tableUiSchema:").concat(formatUiSchema(t),",\n    tableList:[],\n}\n"))};function getScript(e,t,n,o,a,r,i){var s=getFormJson(e,t,n,o,i),_=getTableJson(a,r);return"\n<script>\nexport default {\n    components: {},\n    props: [],\n    data () {\n        return {\n          ".concat(s.substring(1,s.length-1),",\n          ").concat(_.substring(1,_.length-1),"\n      }\n    },\n    computed: {},\n    watch: {},\n    mounted () {},\n    methods: {\n      afterSubmit(){\n        console.log('afterSubmit');\n      }\n    }\n}\n<\/script>\n")}function getTemplate(e){var t=[];return Object.keys(e).forEach((function(n){""!==e[n]&&void 0!==e[n]&&("string"===typeof e[n]?t.push(":".concat(n,"=\"'").concat(e[n],"'\"")):t.push(":".concat(n,'="').concat(e[n],'"')))})),'\n<template>\n   \x3c!-- generator by setaria-low-code TableGenerator v1.0 --\x3e\n    <div>\n      <el-card shadow="never"\n        :header="\'搜索条件\'">\n        <el-query-filter v-model="formModel"\n          v-bind="formProps"\n          :normal-schema="normalSchema"\n          :normal-ui-schema="normalUiSchema"\n          :advance-schema="advanceSchema"\n          :advance-ui-schema="advanceUiSchema"\n          :after-submit="afterSubmit"\n          '.concat(t.join("\n          "),'\n          />\n      </el-card>\n\n      <el-pro-table\n        :schema="tableSchema"\n        :uiSchema="tableUiSchema"\n        :data="tableList"\n      ></el-pro-table>\n\n    </div>\n</template>\n    ')}var generatVueCode=function(e,t,n,o,a,r,i,s){var _=getTemplate(e)+js_beautify__WEBPACK_IMPORTED_MODULE_11___default.a.html(getScript(t,n,o,a,r,i,s))+getStyle();return _},importVueFile=function(e){return new Promise((function(t,n){var o=new FileReader;e.files?(o.readAsText(e.files[0],"UTF-8"),o.onload=function(e){var n=e.target.result;t(_objectSpread(_objectSpread({},getScriptByVueFile(n)),{},{formProps:getDomProps(n)}))}):n(new Error("上传Vue文件错误"))}))},_unused_webpack_default_export={generatVueCode:generatVueCode}}}]);
//# sourceMappingURL=chunk-1f43c228.a471e3c3.js.map